(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(64)},37:function(e,t,n){},53:function(e,t){},55:function(e,t){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(27),c=n.n(l),u=(n(37),n(5)),o=n(6),s=n(8),i=n(7),d=n(9),f=n(19),p=n.n(f),h=n(28),m=n(29),v=n.n(m),b=function(e){return function(t){return!e||-1===e.indexOf(t)}},y=function(e){var t=e.header,n=e.excludeCols;return a.a.createElement("tr",null,t.filter(b(n)).map(function(e,t){return a.a.createElement("th",{key:t},e)}))},E=function(e){var t=e.row,n=e.header,r=e.excludeCols;return a.a.createElement("tr",null,t.filter(function(e,t){return b(r)(n[t])}).map(function(e,t){return a.a.createElement("td",{key:t},e)}))},x=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.body,r=e.excludeCols;return a.a.createElement("div",{className:"csv-table"},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(y,{header:t,excludeCols:r}),n.map(function(e,n){return a.a.createElement(E,{key:n,row:e,header:t,excludeCols:r})}))))}}]),t}(r.Component),O=n(31),j=n(13),k=n(30),C=n.n(k),w=/(\d*d[\/x+\d]+)/i,g=function(e){return e.match(w)},T=function(e){return C.a.roll(e).total},R=function(e){var t=e.rolls;e.body;return a.a.createElement("div",{className:"results"},t.map(function(e,t){var n=Object(j.a)(e,2),r=n[0],l=n[1];return a.a.createElement("span",{key:t},a.a.createElement("strong",null,r,": "),l," ")}))},D=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(a)))).state={results:[]},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"roll",value:function(){var e=this.props,t=e.body,n=e.header,r=e.rollerType,a=e.rollerDice,l=e.excludeCols,c=a||n.find(g)||"1d".concat(t.length),u=[],o=function(e){return function(t){return"number"==typeof e[0][0]?e.find(function(e){return Object(j.a)(e,1)[0]===t}):e[Math.max(t-1,e.length-1)]}}(t);if("linked"===r){var s=T(c);u=n.map(function(e,t){return[e,o(s)[t]]})}else u=n.map(function(e,t){return[e,o(T(c))[t]]});u=u.filter(function(e){var t=Object(j.a)(e,2),n=t[0];t[1];return b(l)(n)});var i=Object(O.a)(this.state.results).concat([u]);this.setState({results:i})}},{key:"render",value:function(){var e=this,t=this.props.maxResults,n=void 0===t?1:t,r=this.state.results;return a.a.createElement("div",{className:"csv-roller"},a.a.createElement("button",{onClick:function(){return e.roll()}},"Roll"),a.a.createElement("div",{className:"csv-roller-results"},r.slice(-n).reverse().map(function(e,t){return a.a.createElement(R,{key:t+e[0],rolls:e})})))}}]),t}(r.Component),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cast:!0};return function(t){return new Promise(function(n,r){v()(t,e,function(e,t){if(e)return r(e);n(t)})})}},L=function(){var e=Object(h.a)(p.a.mark(function e(t){var n,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.next=8,N()(r);case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),A=function(){return a.a.createElement("div",{className:"loader"},"Loading...")},S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(a)))).state={isLoading:!0},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.url;L(t).then(function(t){return e.setState({isLoading:!1,header:t[0],body:t.slice(1)})})}},{key:"render",value:function(){var e=this.props,t=e.includeTable,n=e.includeRoller,r=e.rollerType,l=e.rollerDice,c=e.excludeCols,u=this.state,o=u.isLoading,s=u.header,i=u.body;return!o&&s&&i&&0!==i.length?[n&&a.a.createElement(D,{key:"roller",header:s,body:i,rollerType:r,rollerDice:l,excludeCols:c}),t&&a.a.createElement(x,{key:"table",header:s,body:i,excludeCols:c})]:a.a.createElement(A,null)}}]),t}(r.Component);document.querySelectorAll("[data-csv-url]").forEach(function(e){var t=e.dataset.csvUrl,n="true"===e.dataset.csvTable,r="true"===e.dataset.csvRoller,l=e.dataset.csvExclude&&e.dataset.csvExclude.split(",").map(function(e){return e.trim()}),u=e.dataset.csvRollerType||"linked",o=e.dataset.csvRollerDice;c.a.render(a.a.createElement(S,{url:t,includeTable:n,includeRoller:r,rollerType:u,rollerDice:o,excludeCols:l}),e)})}},[[32,2,1]]]);
//# sourceMappingURL=main.2ad3b12d.chunk.js.map